# 3.1.5 Singleton

## Introdução

O presente documento tem como objetivo apresentar a implementação do padrão de projeto Singleton aplicado à classe `PublicacaoManager`, desenvolvida no contexto do nosso projeto acadêmico.  
O padrão Singleton é um dos padrões criacionais do catálogo GoF (Gang of Four) e tem como finalidade garantir que uma classe possua apenas uma instância em todo o sistema, fornecendo um ponto global de acesso a ela (Refactoring Guru, 2025).

Durante o desenvolvimento do projeto, identificou-se que o diagrama de classes da última entrega não apresentava nenhuma classe apropriada para a aplicação do padrão Singleton. Diante disso, optamos por criar uma nova classe, denominada `PublicacaoManager`.


## Motivação

A motivação principal para o uso do Singleton na classe `PublicacaoManager` é garantir o controle centralizado das publicações em um único ponto do sistema. Com isso, evita-se a criação de múltiplas instâncias que poderiam ocasionar inconsistências de dados, como listas de publicações divergentes entre diferentes partes do código (Refactoring Guru, 2024).

Além disso, a abordagem facilita o acesso global às operações relacionadas às publicações, como adicionar, remover e buscar publicações por autor, mantendo a integridade e a coerência das informações (Refactoring Guru, 2024).


## Desenvolvimento

A implementação do padrão Singleton em Python foi feita utilizando o método especial `__new__()`.  
Esse método é responsável pela criação de novas instâncias de uma classe, permitindo o controle direto sobre o processo de instanciação.

O funcionamento é descrito a seguir:

1. Ao tentar criar uma nova instância de `PublicacaoManager`, o método `__new__()` verifica se já existe uma instância armazenada no atributo de classe `_instancia`.
2. Caso não exista, uma nova instância é criada e armazenada.
3. Em chamadas subsequentes, a mesma instância previamente criada é retornada, garantindo o comportamento Singleton.


## Estrutura do Singleton no Projeto

```python
from typing import List

class PublicacaoManager:
  
    _instancia = None

    def __new__(cls):
        if cls._instancia is None:
            cls._instancia = super(PublicacaoManager, cls).__new__(cls)
            cls._instancia._publicacoes = []  # lista interna de publicações
        return cls._instancia

    def adicionar_publicacao(self, publicacao):
        self._publicacoes.append(publicacao)

    def remover_publicacao(self, publicacao):
        if publicacao in self._publicacoes:
            self._publicacoes.remove(publicacao)
            return True 
        return False

    def buscar_por_aluno(self, dono):
        return [p for p in self._publicacoes if getattr(p, "dono", None) == dono]

    def listar_publicacoes(self):
        return list(self._publicacoes)
```

---

## Funcionalidade

A classe `PublicacaoManager` funciona como um gerenciador global de publicações.  
Ela permite que diferentes partes do sistema interajam com a mesma lista de publicações sem criar instâncias independentes.

### Demonstração do Singleton 


```python

pm1 = PublicacaoManager()
pm2 = PublicacaoManager()

pm1.adicionar_publicacao({"titulo": "Primeira publicação", "dono": "Ana"})

print(pm2.listar_publicacoes())  
print(pm1 is pm2) 

```

#### Resultado:

[Execução do Código](https://drive.google.com/file/d/1uNmq9LteICjG9JTfOE4wRL9G4EhH3H9X/view?usp=share_link)

[Repositório do Código](https://github.com/UnBArqDsw2025-2-Turma02/2025.2_T02_G6_AquiTemFCTE_Entrega_03/blob/docs/gof-singleton/GOFs/Criacionais/Singleton/publication_manager.py)

---

## Diagrama do Singletono


<p align="center" style="font-size: 12;">
Figura 1: Diagrama do Singleton
</p>

![diagrama_singleton](/../assets/singleton.jpg)

<p align="center" style="font-size: 12;">
Fonte: Isaque Camargos
</p>

## Conclusão

A classe `PublicacaoManager` foi criada com o propósito de exemplificar e aplicar o padrão de projeto Singleton dentro do nosso sistema (SERRANO, 2025).  
Sua principal contribuição é o gerenciamento centralizado e consistente das publicações, evitando redundâncias e possíveis falhas de sincronização de dados (Refactoring Guru, 2025; CLIMACO, 2025).

Essa decisão de projeto surgiu da ausência de uma classe adequada para o uso do padrão Singleton no diagrama original, justificando sua criação específica nesta entrega.



## Bibliografia

> SERRANO, Milene. AULA - GOFS CRIACIONAIS. Slides. Universidade de Brasília, 2025. Acesso em: 14 de outubro 2025

> Refactoring Guru. _Singleton_. Disponível em: https://refactoring.guru/pt-br/design-patterns/singleton. Acesso em: 14 de outubro 2025

> CLIMACO, Vinicius. Design Pattern: Singleton. Disponível em: https://climaco.medium.com/design-pattern-singleton-16f4285dc6e. Acesso em: 15 de outubro 2025

## Histórico de Versões

| Versão | Data       | Descrição                                | Autor(es)                             | Revisor(es) | Detalhes da Revisão                                                |
| ------ | ---------- | ---------------------------------------- | ------------------------------------- | ----------- | ------------------------------------------------------------------ |
| 1.0    | 13/10/2025  | Criação da classe PublicacaoManager |[Isaque Camargos](https://github.com/isaqzin) e [Felipe Campelo](https://github.com/felipeacampelo) | - ||
| 1.1    | 14/10/2025  | Documentação do singleton |[Isaque Camargos](https://github.com/isaqzin)| [Felipe Campelo](https://github.com/felipeacampelo) | Necessário video e link para a pasta da implementação do GOF|
| 1.2    | 15/10/2025  | Adiciona link para vídeo e repositório do código |[Felipe Campelo](https://github.com/felipeacampelo)| [Isaque Camargos](https://github.com/isaqzin) | Sem erros|
| 1.3    | 17/10/2025  | Atualiza e Corrige referências |[Felipe Campelo](https://github.com/felipeacampelo)| [Isaque Camargos](https://github.com/isaqzin) | Sem erros|
| 1.4    | 17/10/2025  | Adiciona o Diagrama |[Isaque Camargos](https://github.com/isaqzin)| - | -|

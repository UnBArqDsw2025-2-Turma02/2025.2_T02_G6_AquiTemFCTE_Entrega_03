# 3.1.2. **Multiton**

## Introdução

Este documento tem como objetivo apresentar a aplicação do padrão de projeto **Multiton**, um dos padrões GoF (Gang of Four), no contexto do sistema **AquiTemFCTE**. O padrão **Multiton** é utilizado para garantir que para cada chave específica (como uma **categoria de produto**), exista uma única instância de gerenciamento de dados. Esse padrão é ideal para cenários onde diferentes partes do sistema precisam de **instâncias únicas por chave**.

Ao contrário do padrão **Singleton**, que garante uma única instância global, o **Multiton** permite que **várias instâncias** existam, mas **uma instância única por chave**. No contexto do sistema, ele será aplicado para gerenciar as **categorias de produtos**, como **"Aparelho Eletrônico"**, **"Livro"**, **"Roupas"**, onde cada **categoria** terá uma instância única de gerenciamento, mas será possível cadastrar múltiplos produtos dentro de cada categoria.

## Metodologia

Com base no escopo do sistema e no diagrama de componentes fornecido, foram analisadas as áreas em que a aplicação do padrão **Multiton** seria pertinente. A avaliação considerou critérios como a **gestão única de categorias** e a **otimização de recursos**.

Durante o processo de análise, foi considerado o uso do **Multiton** para as **categorias de produtos**, garantindo que cada tipo de **categoria de produto** tenha uma única instância compartilhada, enquanto cada produto dentro dessa categoria pode ter seus dados próprios (nome, preço, descrição).

O **Multiton** foi escolhido como exemplo prático para gerenciar as **categorias de produtos**, como **"Aparelho Eletrônico"**, **"Livro"**, etc., garantindo que a lógica de cada categoria seja centralizada e reutilizada.

## Desenvolvimento

No sistema **AquiTemFCTE**, o padrão **Multiton** foi aplicado para gerenciar as categorias de produtos, garantindo que para **cada categoria**, haja **uma instância única de gerenciamento**, mas permitindo o cadastro de **múltiplos produtos** dentro de cada categoria.

A implementação foi feita utilizando **Python**, seguindo a estrutura de **programação orientada a objetos (OO)**, com classes que garantem uma instância única por categoria de produto.

### Estrutura do Multiton no Projeto

* **Classe Multiton de Categoria**:
  A classe `CategoriaMultiton` é responsável por manter uma instância única de cada **categoria de produto**. Ela garante que, para cada tipo de categoria, como **"Aparelho Eletrônico"** ou **"Livro"**, exista uma única instância de gerenciamento de produtos dessa categoria.

* **Classe Produto**:
  A classe `Produto` gerencia os produtos dentro de uma **categoria** específica. Cada produto tem características próprias (nome, preço, descrição), mas a categoria em que ele se encontra será gerida por uma instância única do **Multiton**.

### Código Aplicado

```python
class CategoriaMultiton:
    # Dicionário para armazenar instâncias únicas por categoria
    _categorias = {}

    def __new__(cls, categoria):
        # Garantir que exista uma única instância para cada categoria
        if categoria not in cls._categorias:
            instance = super().__new__(cls)
            instance.categoria = categoria
            instance.produtos = []
            cls._categorias[categoria] = instance
        return cls._categorias[categoria]

    def adicionar_produto(self, produto):
        self.produtos.append(produto)

    def listar_produtos(self):
        return self.produtos

# Exemplo de classe Produto
class Produto:
    def __init__(self, nome, preco, descricao):
        self.nome = nome
        self.preco = preco
        self.descricao = descricao

# Usando o Multiton para gerenciar categorias
categoria_eletronico = CategoriaMultiton("Aparelho Eletrônico")
produto1 = Produto("Smartphone XYZ", 1000, "Smartphone com 4GB de RAM")
produto2 = Produto("TV 50\" 4K", 2500, "Televisor com resolução 4K")

# Adicionando produtos à categoria "Aparelho Eletrônico"
categoria_eletronico.adicionar_produto(produto1)
categoria_eletronico.adicionar_produto(produto2)

# Listando os produtos da categoria "Aparelho Eletrônico"
print(f"Produtos na categoria {categoria_eletronico.categoria}:")
for produto in categoria_eletronico.listar_produtos():
    print(f"- {produto.nome} ({produto.preco})")
    
# Verificando se a instância da categoria "Aparelho Eletrônico" é única
categoria_eletronico2 = CategoriaMultiton("Aparelho Eletrônico")
print(categoria_eletronico is categoria_eletronico2)  # True
```

### Saída Esperada

```txt
Produtos na categoria Aparelho Eletrônico:
- Smartphone XYZ (1000)
- TV 50" 4K (2500)
True
```

#### Explicação:

* **Instância única por categoria**: O **Multiton** garante que, para a chave **"Aparelho Eletrônico"**, a instância da categoria seja única. Ou seja, a categoria **"Aparelho Eletrônico"** terá apenas uma instância de gerenciamento, mas você pode adicionar quantos produtos quiser a essa categoria.
* **Cadastro de múltiplos produtos**: Os produtos **"Smartphone XYZ"** e **"TV 50" 4K"** foram cadastrados dentro da **categoria** **"Aparelho Eletrônico"**, e a instância de **categoria** única é a mesma, independente de quantos produtos forem adicionados.

## Conclusão

A aplicação do padrão **Multiton** no sistema **AquiTemFCTE** para a gestão das **categorias de produtos** garante a **centralização do gerenciamento de categorias** e **eficiência no uso de recursos**, evitando a criação de múltiplas instâncias para a mesma categoria de produto. O **Multiton** permite, assim, um **gerenciamento único e consistente** para cada tipo de categoria, enquanto mantém a flexibilidade de permitir o cadastro de múltiplos produtos dentro de cada categoria.

Com a implementação em **Python** orientada a objetos, o **Multiton** foi facilmente adaptado para a realidade do sistema, proporcionando **instâncias únicas** por categoria de produto e otimizando a manutenção e leitura de dados dentro da plataforma.

## Bibliografia


## Histórico de Versões

| Versão | Data       | Descrição                                                             | Autor(es)                                     | Revisor(es)                                   | Detalhes da revisão |
| ------ | ---------- | --------------------------------------------------------------------- | --------------------------------------------- | --------------------------------------------- | ------------------- |
| 1.0    | 11/10/2025 | Inicialização do Documento  | [Eric Rabelo](https://github.com/rabelzx) | [Algusto Caldas](https://github.com/Algusto-RC) | Revisado e Aprovado|


<style>
    .markdown-section table {
        justify-items: center;
    }

    img{
        justify-items: center;
        
    }

</style>

# 3.2.1. Adapter

## 1. Introdução

O padrão Adapter, pertencente ao grupo de padrões estruturais do catálogo GoF (_Gang of Four_), tem como objetivo converter a interface de uma classe em outra interface esperada pelos clientes, permitindo que classes com interfaces incompatíveis trabalhem em conjunto. Em outras palavras, ele atua como um tradutor entre duas classes, possibilitando a colaboração entre componentes que, de outra forma, não poderiam se comunicar diretamente.

De acordo com Gamma et al. (1994), esse padrão é especialmente útil quando se deseja reutilizar uma classe existente cujo formato de interface não corresponde ao exigido pela aplicação. Nesses casos, o Adapter cria uma camada intermediária que adapta uma interface à outra, promovendo reutilização de código, flexibilidade e baixo acoplamento entre componentes.


## 2. Metodologia

Para implementar o padrão Adapter, adotamos uma abordagem orientada a objetos, desenvolvendo as classes em Python. A ideia central foi identificar um elemento do sistema que pudesse ser adaptado para se comportar como um produto, permitindo sua publicação dentro do AquiTemFCTE.  
Assim, seguimos os seguintes passos:
1. Analisamos a estrutura existente de classes (`Produto`, `Aluno`, `Publicacao`);
2. Identificamos uma entidade com comportamento distinto que poderia ser adaptada (`Aluguel`); ela não estava no escopo original, mas faz sentido para o nosso site;
3. Criamos a classe `AdapterAluguel`, que herda de `Produto` e converte um objeto `Aluguel` para o formato esperado pelo sistema.

### 3. Participantes

Os participantes da implementação deste Padrão de Projeto estão descritos na tabela abaixo:

<p style="text-align: center;">Tabela 1: Participantes da implementação do Adapter</p>

|Matrícula | Aluno |
| -- | -- |
| 23/1011515 |  Isaque Camargos Nascimento |
| 23/1026750  |  Ludmila Aysha Oliveira Nunes |


## 4. Aplicação do GoF Adapter
### 4.1. Modelagem

A modelagem proposta contempla um conjunto de classes que representam o domínio do sistema AquiTemFCTE.  
- **Produto**: Classe base para os itens publicados no sistema, contendo informações como nome, preço, descrição, categoria, modalidade e estado.  
- **Aluno**: Representa o usuário do sistema, com dados de identificação e métodos para editar perfil e gerenciar publicações.  
- **Publicacao**: Responsável por encapsular as informações do produto, do dono e do status da publicação.  
- **Aluguel**: Classe independente, criada para representar imóveis disponíveis para locação, com atributos específicos como valor do condomínio, metragem e número de quartos.  
- **AdapterAluguel**: Classe adaptadora que herda de `Produto` e converte um objeto `Aluguel` para o formato aceito pelo sistema, permitindo que seja tratado como um produto.

A modelagem desenvolvida pode ser observada na Figura 1 abaixo.

<p align="center" style="font-size: 12;">Figura 1: Modelagem do Adapter</p>

![Modelagem do Adapter](/../assets/gof-adapter.drawio.png)

<p align="center" style="font-size: 8;"> Fonte: Criado em <a href="https://app.diagrams.net">diagrams.net</a> por Ludmila Nunes e Isaque Camargos.</p>


### 4.2. Implementação

Nesta seção, apresentamos o código implementado para o Adapter, dividido em duas partes: 
1. **Classes planejadas no diagrama da Entrega 2**, que representam a base do sistema; 
2. **Novas classes introduzidas** para a aplicação do padrão de projeto Adapter.


#### 4.2.1. Classes Planejadas no Diagrama da Entrega 2

Essas classes compõem a estrutura original do AquiTemFCTE, com adição da categoria imóvel e modalidade Aluguel, permitindo a criação de alunos, produtos e publicações. Nem todos os métodos foram criados para facilitar o trabalho.

```python
from datetime import date
from enum import Enum

class StatusEnum(Enum):
    DISPONIVEL = "Disponível"
    INDISPONIVEL = "Indisponível"


class CategoriaEnum(Enum):
    ELETRONICO = "Aparelho Eletrônico"
    LIVRO = "Livro"
    ROUPA = "Roupa"
    MOVEL = "Móvel"
    IMOVEL = "Imóvel"
    OUTROS = "Outros"


class ModalidadeEnum(Enum):
    VENDA = "Venda"
    TROCA = "Troca"
    ALUGUEL = "Aluguel"
    VENDA_TROCA = "Venda/Troca"


class EstadoEnum(Enum):
    NOVO = "Novo"
    USADO = "Usado"
```

As Enums acima definem categorias e estados possíveis para os produtos, garantindo padronização nas publicações.


##### 4.2.1.1. Classe `Produto`

Responsável por representar um item publicado no sistema. Contém informações principais e métodos para manipulação de imagens e obtenção de dados.

```python
class Produto:
    def __init__(self, id_produto: int, nome: str, preco: float, descricao: str,
                 categoria: CategoriaEnum, modalidade: ModalidadeEnum, estado: EstadoEnum):
        self.id_produto = id_produto
        self.nome = nome
        self.preco = preco
        self.descricao = descricao
        self.categoria = categoria
        self.modalidade = modalidade
        self.estado = estado
        self.imagens = []

    def adicionar_imagem(self, url: str):
        self.imagens.append(url)

    def remover_imagem(self, url: str):
        if url in self.imagens:
            self.imagens.remove(url)

    def obter_dados(self):
        return {
            "id": self.id_produto,
            "nome": self.nome,
            "preco": self.preco,
            "descricao": self.descricao,
            "categoria": self.categoria.value,
            "modalidade": self.modalidade.value,
            "estado": self.estado.value,
            "imagens": self.imagens
        }
```


##### 4.2.1.2. Classe `Aluno`

Representa o usuário do sistema, com dados pessoais e funcionalidades de perfil.

```python
class Aluno:
    def __init__(self, nome: str, matricula: int, email: str, telefone: str, senha: str,
                 foto_perfil: str = "", sobre_mim: str = ""):
        self.nome = nome
        self.matricula = matricula
        self.email = email
        self.telefone = telefone
        self.senha = senha
        self.foto_perfil = foto_perfil
        self.sobre_mim = sobre_mim
        self.produtos_publicados = []

    def mudar_senha(self, nova_senha):
        self.senha = nova_senha

    def editar_sobre_mim(self, texto: str):
        self.sobre_mim = texto

    def obter_nome(self):
        return self.nome

    def obter_matricula(self):
        return self.matricula

    def obter_telefone(self):
        return self.telefone
```


##### 4.2.1.3. Classe `Publicacao`

Gerencia o vínculo entre o produto, o dono (aluno) e o status da publicação.

```python
class Publicacao:
    def __init__(self, produto: Produto, dono: Aluno):
        self.produto = produto
        self.dono = dono
        self.status = StatusEnum.DISPONIVEL
        self.data_publicacao = date.today()

    def obter_status(self):
        return self.status

    def obter_dono(self):
        return self.dono

    def obter_produto(self):
        return self.produto

    def mudar_status(self, novo_status: StatusEnum):
        self.status = novo_status
```


#### 4.2.2. Novas Classes

Durante o desenvolvimento, surgiu a necessidade de adicionar ao sistema a funcionalidade de aluguel de imóveis, que inicialmente não fazia parte do escopo. 
Para integrar esse novo tipo de item sem modificar o código existente de `Produto` e `Publicacao`, utilizou-se o padrão Adapter.


##### 4.2.2.1. Classe `Aluguel`

Classe independente que representa imóveis para locação, com atributos próprios e método de cálculo de valor total (aluguel + condomínio).

```python
class Aluguel:
    def __init__(self, endereco: str, valor_mensal: float, condominio: float, metragem: float, quartos: int):
        self.endereco = endereco
        self.valor_mensal = valor_mensal
        self.condominio = condominio
        self.metragem = metragem
        self.quartos = quartos

    def calcular_valor_total(self):
        return self.valor_mensal + self.condominio
```


##### 4.2.2.2. Classe `AdapterAluguel`

A classe **AdapterAluguel** herda de `Produto` e adapta um objeto `Aluguel` para o formato aceito pelo sistema. 
Dessa forma, o imóvel pode ser tratado como um produto e publicado normalmente.

```python
class AdapterAluguel(Produto):
    def __init__(self, aluguel: Aluguel):
        valor_total = aluguel.calcular_valor_total()
        descricao = f"{aluguel.metragem}m² - Condomínio: R${aluguel.condominio:.2f} - Número de quartos: {aluguel.quartos}"
        super().__init__(
            id_produto=999,
            nome=f"Imóvel em {aluguel.endereco}",
            preco=valor_total,
            descricao=descricao,
            categoria=CategoriaEnum.IMOVEL,
            modalidade=ModalidadeEnum.ALUGUEL,
            estado=EstadoEnum.USADO
        )
        self.aluguel = aluguel
```


##### 4.2.2.3. Exemplo de Utilização

O trecho abaixo demonstra a integração completa do Adapter, criando uma publicação de aluguel que se comporta como um produto comum.

```python
if __name__ == "__main__":
    aluno = Aluno(
        nome="Zoé",
        matricula=231011111,
        email="231011111@aluno.unb.br",
        telefone="99999-9999",
        senha="1234"
    )

    aluguel1 = Aluguel("QNL 18 conjunto F casa 21", 900.0, 200.0, 45.0, 3)
    aluguel_adapter = AdapterAluguel(aluguel1)
    pub = Publicacao(aluguel_adapter, aluno)

    print(pub.obter_dono().nome)
    print(pub.obter_produto().descricao)
```

## 5. Como executar a Implementação


Após clonar o repositório para sua máquina local, siga os passos abaixo para rodar a implementação do padrão de projeto Adapter.

1. Abra o terminal na pasta raiz do projeto (onde o repositório foi clonado).

2. Navegue até o diretório do Adapter com o comando:
   
   ```bash
   cd GOFs/Estruturais/adapter
   ```

3. Execute o arquivo principal do exemplo:
   
   ```bash
   python3 adapter.py
   ```

> Certifique-se de ter o **Python 3** instalado e configurado corretamente no seu sistema. 
> Caso esteja usando Windows, o comando pode ser `python` em vez de `python3`.


## 6. Vídeo


<p align="center" style="font-size: 12;">Vídeo 1: Execução do adapter</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Dgf3dahJKSY?si=koUVXQIyTb7UbG_B" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p align="center" style="font-size: 12;">
Fonte: Isaque Camargos
</p>

## 7. Senso Crítico e Trabalho em Equipe

Durante o desenvolvimento, a equipe encontrou dificuldade em identificar um caso concreto de aplicação do padrão Adapter dentro do escopo original do projeto.  
Após discussões com a professora, o líder do grupo e a equipe de desenvolvimento, surgiu a ideia de criar a funcionalidade de aluguel de imóveis, que inicialmente não estava prevista no projeto.  
A partir disso, percebemos que o Adapter poderia ser aplicado para integrar essa nova entidade (`Aluguel`) ao sistema sem modificar sua estrutura base. Essa decisão não apenas solucionou o problema técnico, mas também agregou valor ao projeto, tornando-o mais completo e realista para o contexto da FCTE.


## 8. Conclusão

A aplicação do padrão Adapter demonstrou a importância dos padrões de projeto na construção de sistemas extensíveis e flexíveis.  
Mesmo diante da dificuldade inicial de encontrar um caso de uso apropriado, a equipe conseguiu, com diálogo e análise, adaptar o conceito de aluguel para o contexto do AquiTemFCTE, mantendo a coesão e a clareza arquitetural.  
Além disso, o Adapter se mostrou uma solução elegante para integração de novas funcionalidades sem comprometer o código existente, representando uma possível evolução natural do sistema.

## 9. Referências

> GAMMA, Erich; HELM, Richard; JOHNSON, Ralph; VLISSIDES, John. Design Patterns: Elements of Reusable Object-Oriented Software. 1. ed. Boston: Addison-Wesley, 1994. 

> SERRANO, Milene, Arquitetura e Desenho de Software - Aula - GOFS Estruturais. Disponível em: https://aprender3.unb.br/pluginfile.php/3178543/mod_page/content/1/Arquitetura%20e%20Desenho%20de%20Software%20-%20Aula%20GoFs%20Estruturais%20-%20Profa.%20Milene.pdf. Universidade de Brasília - UnB. Brasília. Acesso em 18 de outubro de 2025.

> Refactoring Guru. Adapter. Disponível em: https://refactoring.guru/pt-br/design-patterns/adapter. Acesso em: 18 de outubro 2025

## Histórico de Versões

| Versão | Data | Descrição | Autor(es) | Revisor(es) | Detalhes da Revisão |
| ------ | ---- | --------- | --------- | ----------- | ------------------- |
| 1.0    | 17/10/2025 | Criação do código do adapter | [Isaque Camargos](https://github.com/isaqzin) e [Ludmila Nunes](https://github.com/ludmilaaysha) |  [Daniel Rodrigues](https://github.com/DanielRogs) | Nenhum erro identificado, mas falta conteúdo |
| 1.1    | 18/10/2025 | Documentação do adapter | [Isaque Camargos](https://github.com/isaqzin) e [Ludmila Nunes](https://github.com/ludmilaaysha) |  [Daniel Rodrigues](https://github.com/DanielRogs) | Nenhum erro identificado na revisão, mas falta a modelagem |
| 1.2    | 18/10/2025 | Refinamento da documentação e adição da modelagem | [Isaque Camargos](https://github.com/isaqzin) e [Ludmila Nunes](https://github.com/ludmilaaysha) |  [Daniel Rodrigues](https://github.com/DanielRogs) | Nenhum erro identificado, porém falta vídeo de demonstração |
| 1.3    | 19/10/2025 | Adição da gravação e tutorial de execução | [Isaque Camargos](https://github.com/isaqzin) | [Ludmila Nunes](https://github.com/ludmilaaysha)  |  Sem erros |
